version: '3'

services:
  frontend:
    build:
      context: .
      dockerfile: ./frontend/Dockerfile
    #image: registry.servers.network/sdk-tech-llc/frontend/wetheculture-site/testing:frontend_latest
    ports:
      - "8000:3000"
    # links:
    #   - "backend"


  backend:
    build:
      context: .
      dockerfile: ./backend/Dockerfile
    # image: registry.servers.network/sdk-tech-llc/frontend/wetheculture-site/testing:website_latest
    environment:
      - PORT=5000
      - DB_HOST=db
      - DB_USERNAME=sdktest
      - DB_PASSWORD=bh9T6yTRFSttevbCYUBrHuZRvftpQP5maaLdbQ32UBjtKswUQf
      - DB_PORT=5432
      - DB_NAME=internal
      - ACCESS_TOKEN_SECRET=secret
      - ACCESS_TOKEN_EXPIRES=300s
    ports:
      - "5000:5000"



  db:
    image: postgres
    restart: always
    ports:
      - "5432:5432"
    # volumes:
    #   - ./postgres_data:/var/lib/postgresql/data/
    environment:
      - POSTGRES_USER=sdktest
      - POSTGRES_PASSWORD=bh9T6yTRFSttevbCYUBrHuZRvftpQP5maaLdbQ32UBjtKswUQf
      - POSTGRES_DB=internal


  pgadmin:
      container_name: pgadmin4_container
      image: dpage/pgadmin4
      restart: always
      environment:
        PGADMIN_DEFAULT_EMAIL: admin@admin.com
        PGADMIN_DEFAULT_PASSWORD: root
      ports:
        - "5050:80"
  # phppgadmin:
  #     restart: always
  #     image: dockage/phppgadmin:latest
  #     ports:
  #     - "8080:80"
  #     # - "443:443"
  #     environment:
  #     # - PHP_PG_ADMIN_SERVER_DESC=WethecultureBackend
  #     - PHP_PG_ADMIN_SERVER_HOST=db
  #     - PHP_PG_ADMIN_SERVER_PORT=5432
  #     # - PHP_PG_ADMIN_SERVER_SSL_MODE=allow
  #     - PHP_PG_ADMIN_SERVER_DEFAULT_DB=postgres
  #     # - PHP_PG_ADMIN_SERVER_PG_DUMP_PATH=/usr/bin/pg_dump
  #     # - PHP_PG_ADMIN_SERVER_PG_DUMPALL_PATH=/usr/bin/pg_dumpall


    # - PHP_PG_ADMIN_DEFAULT_LANG=auto
    # - PHP_PG_ADMIN_AUTO_COMPLETE=default on
    # - PHP_PG_ADMIN_EXTRA_LOGIN_SECURITY=false
    # - PHP_PG_ADMIN_OWNED_ONLY=false
    # - PHP_PG_ADMIN_SHOW_COMMENTS=true
    # - PHP_PG_ADMIN_SHOW_ADVANCED=false
    # - PHP_PG_ADMIN_SHOW_SYSTEM=false
    # - PHP_PG_ADMIN_MIN_PASSWORD_LENGTH=1
    # - PHP_PG_ADMIN_LEFT_WIDTH=200
    # - PHP_PG_ADMIN_THEME=default
    # - PHP_PG_ADMIN_SHOW_OIDS=false
    # - PHP_PG_ADMIN_MAX_ROWS=30
    # - PHP_PG_ADMIN_MAX_CHARS=50
    # - PHP_PG_ADMIN_USE_XHTML_STRICT=false
    # - PHP_PG_ADMIN_HELP_BASE=http://www.postgresql.org/docs/%s/interactive/
    # - PHP_PG_ADMIN_AJAX_REFRESH=3
